(this["webpackJsonpburger-build"]=this["webpackJsonpburger-build"]||[]).push([[0],{149:function(e,t,n){e.exports=n.p+"static/media/burger.fbe040ce.svg"},173:function(e,t,n){e.exports=n(313)},178:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},198:function(e,t,n){},220:function(e,t,n){},313:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),o=n.n(c),i=(n(178),n(39)),s=n(40),l=n(43),u=n(42),d=(n(179),n(20)),p=n(79),m=(n(180),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=null;switch(this.props.type){case"bread-bottom":e=r.a.createElement("div",{className:"BreadBottom"});break;case"bread-top":e=r.a.createElement("div",{className:"BreadTop"},r.a.createElement("div",{className:"Seeds1"}),r.a.createElement("div",{className:"Seeds2"}));break;case"meat":e=r.a.createElement("div",{className:"Meat"});break;case"cheese":e=r.a.createElement("div",{className:"Cheese"});break;case"salad":e=r.a.createElement("div",{className:"Salad"});break;case"bacon":e=r.a.createElement("div",{className:"Bacon"});break;default:e=null}return e}}]),n}(r.a.Component)),h=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.ingredients,t=e&&Object.keys(e).map((function(t){return Object(p.a)(Array(e[t])).map((function(e,n){return r.a.createElement(m,{key:"".concat(t,"_").concat(n),type:t})}))})).reduce((function(e,t){return e.concat(t)}),[]);return t&&0===t.length&&(t=r.a.createElement("p",null,"Please Start Adding Ingredients.")),r.a.createElement("div",{className:"Burger"},r.a.createElement(m,{type:"bread-top"}),t,r.a.createElement(m,{type:"bread-bottom"}))}}]),n}(r.a.Component),b=(n(181),n(73)),g=function(e){return r.a.createElement("div",{className:"BuildControls"},r.a.createElement("div",{className:"InnerBuildControls"},r.a.createElement("div",null,r.a.createElement("label",null,e.label)),r.a.createElement(b.a,{type:"primary",onClick:e.add},"More"),r.a.createElement(b.a,{type:"secondary",onClick:e.delete,disabled:e.disabled[e.type]},"Less")))},f=(n(198),n(314)),E=n(321),O=n(318),y=function(e){var t=e.ingredients,n=e.price,a=e.close,c=e.clickOrder;return r.a.createElement(O.a,{title:"Your Order",visible:!0,onCancel:e.close,footer:[r.a.createElement(b.a,{key:"back",onClick:a},"Cancel"),r.a.createElement(b.a,{key:"submit",type:"primary",onClick:c},"Continue")]},r.a.createElement("h2",null,"A delicious Burger with the following ingredients"),r.a.createElement("ul",null,Object.keys(t).map((function(e){return r.a.createElement("li",{key:e},r.a.createElement("strong",null,e," : "),t[e])}))),r.a.createElement("p",null,r.a.createElement("strong",null,"Total Price: $ ",n.toFixed(2))),r.a.createElement("span",null,"Continue to checkout?"))},v=n(41),j="INIT_INGRDIENTS",k="INIT_INGRDIENTS_SUCCEDED",I="ADD_INGREDIENT",C="REMOVE_INGREDIENT",S="ORDER_BURGER",w="ORDER_BURGER_SUCCESS",N="ORDER_CONFIRM",x=[{labels:"Salad",type:"salad"},{labels:"Bacon",type:"bacon"},{labels:"Cheese",type:"cheese"},{labels:"Meat",type:"meat"}],T=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={purchaseable:!1,summaryModal:!1,isLoading:!1},e.updatePurchase=function(){var t=Object(d.a)({},e.props.newIngredients);return Object.keys(t).map((function(e){return t[e]})).reduce((function(e,t){return e+t}),0)>0},e.toggleModal=function(){e.setState({summaryModal:!e.state.summaryModal})},e.openOrderSummary=function(){e.props.tokenId||e.props.history.push("/authentication"),e.setState({summaryModal:!0})},e.continueWithOrder=function(){e.props.OrderConfirm(),e.props.history.push("/checkout-summary")},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.initIngredients()}},{key:"render",value:function(){var e=this,t=Object(d.a)({},this.props.newIngredients);for(var n in t)t[n]=t[n]<=0;var a=r.a.createElement(E.a,{style:{fontSize:44},spin:!0});return r.a.createElement(f.a,{indicator:a,spinning:this.state.isLoading},this.props.newIngredients?r.a.createElement("div",null,r.a.createElement(h,{ingredients:this.props.newIngredients}),r.a.createElement("div",{className:"priceOrder"},r.a.createElement("p",{className:"price"},"Price: $ ",this.props.price.toFixed(2)),r.a.createElement(b.a,{type:"primary",onClick:this.openOrderSummary,disabled:this.props.tokenId&&!this.updatePurchase()},this.props.tokenId?"Order":"Sign up to Order")),x.map((function(n){return r.a.createElement(g,{key:n.labels,label:n.labels,type:n.type,add:function(){return e.props.addIngredients(n.type)},delete:function(){return e.props.deleteIngredients(n.type)},disabled:t})})),this.state.summaryModal&&r.a.createElement(y,{ingredients:this.props.newIngredients,close:this.toggleModal,price:this.props.price,clickOrder:this.continueWithOrder})):r.a.createElement(f.a,{spinner:"true",indicator:a,style:{top:95}}))}}]),n}(r.a.Component),R={addIngredients:function(e){return{type:I,ingredientName:e}},deleteIngredients:function(e){return{type:C,ingredientName:e}},initIngredients:function(){return{type:j}},OrderConfirm:function(){return{type:N}}},U=Object(v.b)((function(e){var t=e.authenticationReducer,n=e.initIngredientsReducer;return{price:n.totalPrice,newIngredients:n.ingredients,tokenId:null!==t.tokenId}}),R)(T),_=n(317),M=n(149),D=n.n(M),P=n(34),B=n(59),A=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"We hope the burger tastes good!"),r.a.createElement("div",null,r.a.createElement(h,{ingredients:e.ingredients})),r.a.createElement(b.a,{type:"dashed",danger:!0,onClick:e.onCheckoutCancel},"Cancel"),r.a.createElement(b.a,{type:"primary",onClick:e.onCheckoutContinue},"Continue"))},H=n(62),L=n(319),F=n(315),G=n(320),W=(n(220),L.a.Option),z=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={name:"",email:"",street:"",postalCode:"",deliveryMethod:"",isLoading:!1},e.onChangeHandle=function(t){t.preventDefault();var n=t.target,a=n.name,r=n.value;e.setState(Object(H.a)({},a,r))},e.onOrderSubmit=function(){e.setState({isLoading:!0});var t={name:e.state.name,email:e.state.email,street:e.state.street,postalCode:e.state.postalCode,deliveryMethod:e.state.deliveryMethod,ingredients:e.props.ingrnt,totalPrice:e.props.price};e.props.orderIngredients(t,e.props.tokenId)},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=r.a.createElement(E.a,{style:{fontSize:44},spin:!0});return r.a.createElement("div",{className:"contact-wrap"},r.a.createElement(F.a,null,r.a.createElement(F.a.Item,{label:"Name"},r.a.createElement(G.a,{name:"name",value:this.state.name,onChange:this.onChangeHandle})),r.a.createElement(F.a.Item,{label:"Email"},r.a.createElement(G.a,{name:"email",value:this.state.email,onChange:this.onChangeHandle})),r.a.createElement(F.a.Item,{label:"Street"},r.a.createElement(G.a,{name:"street",value:this.state.street,onChange:this.onChangeHandle})),r.a.createElement(F.a.Item,{label:"Postal Code"},r.a.createElement(G.a,{name:"postalCode",value:this.state.postalCode,onChange:this.onChangeHandle})),r.a.createElement(F.a.Item,{label:"Delevery Method"},r.a.createElement(L.a,{name:"deliveryMethod",onChange:function(t){e.setState({deliveryMethod:t})},value:this.state.deliveryMethod},r.a.createElement(W,{value:"Fastest"},"Fastest"),r.a.createElement(W,{value:"Moderate"},"Moderate"))),r.a.createElement(b.a,{onClick:this.onOrderSubmit,type:"primary",style:{float:"right"}},"Order Now")),this.state.isLoading&&r.a.createElement("div",{className:"spinner-styling"},r.a.createElement(f.a,{spinner:"true",indicator:t})))}}]),n}(r.a.Component),J={orderIngredients:function(e,t){return{type:S,payload:e,tokenId:t}}},X=Object(v.b)((function(e){var t=e.initIngredientsReducer,n=e.authenticationReducer;return{ingrnt:t.ingredients,price:t.totalPrice,tokenId:n.tokenId}}),J)(z),K=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onCheckoutCancel=function(){e.props.history.goBack()},e.onCheckoutContinue=function(){e.props.history.replace("/checkout-summary/contact-data")},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.orderConfirm?r.a.createElement(P.a,{to:"/"}):null;return r.a.createElement("div",{style:{textAlign:"center"}},e,r.a.createElement(A,{ingredients:this.props.ingrnt,onCheckoutCancel:this.onCheckoutCancel,onCheckoutContinue:this.onCheckoutContinue}),r.a.createElement(P.b,{path:"".concat(this.props.match.path,"/contact-data"),component:X}))}}]),n}(r.a.Component),$=Object(v.b)((function(e){var t=e.initIngredientsReducer,n=e.orderIngredientsReducer;return{ingrnt:t.ingredients,price:t.totalPrice,orderConfirm:n.orderConfirm}}))(K),q=n(316),Q="FETCH_ORDER",V="FETCH_ORDER_SUCCESS",Z=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchOrder(this.props.tokenId)}},{key:"render",value:function(){var e=this.props.fetchOrders;return r.a.createElement("div",null,e&&e.map((function(e){return r.a.createElement(q.a,{key:e.id,style:{width:700}},r.a.createElement("p",null,r.a.createElement("strong",null,"Ingredients: "),Object.keys(e.ingredients).map((function(t){return r.a.createElement("span",{style:{textTransform:"capitalize",border:"1px dotted #ccc",padding:2,margin:"0 2px"},key:t},"".concat(t," (").concat(e.ingredients[t],") "))}))),r.a.createElement("p",null,r.a.createElement("b",null,"Price: ",r.a.createElement("strong",null,"USD ",e.totalPrice.toFixed(2)))))})))}}]),n}(r.a.Component),Y={fetchOrder:function(e){return{type:Q,tokenId:e}}},ee=Object(v.b)((function(e){var t=e.fetchOrderReducer,n=e.authenticationReducer;return{fetchOrders:t.fetchedOrders,tokenId:n.tokenId}}),Y)(Z),te=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",isSignUp:!0},e.onUserChangeHandle=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(H.a)({},a,r))},e.authenticateSubmitHandle=function(){var t={email:e.state.email,password:e.state.password,returnSecureToken:!0};e.props.authenticateUser(t,e.state.isSignUp)},e.switchSignOption=function(){e.setState((function(e){return{isSignUp:!e.isSignUp}}))},e}return Object(s.a)(n,[{key:"render",value:function(){var e=null;return this.props.tokenId&&(e=this.props.buildStatus?r.a.createElement(P.a,{to:"/checkout-summary"}):r.a.createElement(P.a,{to:"/"})),r.a.createElement("div",{style:{maxWidth:500,margin:"0 auto"}},e,r.a.createElement(F.a,{name:"basic"},r.a.createElement(F.a.Item,{label:"Username"},r.a.createElement(G.a,{name:"email",value:this.state.name,onChange:this.onUserChangeHandle})),r.a.createElement(F.a.Item,{label:"Password"},r.a.createElement(G.a.Password,{name:"password",value:this.state.password,onChange:this.onUserChangeHandle})),r.a.createElement(F.a.Item,null,r.a.createElement(b.a,{type:"primary",onClick:this.authenticateSubmitHandle},"Submit"),r.a.createElement(b.a,{type:"secondary",style:{marginLeft:10},onClick:this.switchSignOption},"Switch To Sign ",this.state.isSignUp?"Sign In":"Sign Up "))))}}]),n}(r.a.Component),ne=Object(v.b)((function(e){var t=e.authenticationReducer,n=e.initIngredientsReducer;return{tokenId:null!==t.tokenId,buildStatus:n.builder}}))(te),ae="AUTHENTICATE_USER",re="AUTHENTICATE_USER_SUCCESS",ce="LOGOUT_SUCCESS",oe="TOKEN_STATUS",ie=function(e,t){return{type:re,tokenId:e,expiration:t}},se={authenticateUser:function(e,t){return{type:ae,payload:e,isSignUp:t}}},le=ne,ue=Object(v.b)(null,se)(le),de=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.logOut()}},{key:"render",value:function(){return r.a.createElement(P.a,{to:"/"})}}]),n}(r.a.Component),pe={logOut:function(){return localStorage.removeItem("tokenId"),localStorage.removeItem("expirationTime"),{type:ce}}},me=Object(v.b)(null,pe)(de),he=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.props.retainLoginStatus()}},{key:"render",value:function(){var e=r.a.createElement(P.d,null,r.a.createElement(P.b,{path:"/authentication",component:ue}),r.a.createElement(P.b,{path:"/",exact:!0,component:U}),r.a.createElement(P.a,{to:"/"}));return this.props.tokenId&&(e=r.a.createElement(P.d,null,r.a.createElement(P.b,{path:"/checkout-summary",component:$}),r.a.createElement(P.b,{path:"/order-details",component:ee}),r.a.createElement(P.b,{path:"/logout",component:me}),r.a.createElement(P.b,{path:"/",exact:!0,component:U}))),r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"header-styling"},r.a.createElement("h1",null,r.a.createElement("img",{src:D.a,alt:"BurgerLogo"})),r.a.createElement("nav",null,r.a.createElement(_.a,{mode:"horizontal"},r.a.createElement(_.a.Item,null,r.a.createElement(B.b,{to:"/"},"Burger Builder")),this.props.tokenId?r.a.createElement(_.a.Item,null,r.a.createElement(B.b,{to:"/order-details"},"Orders")):null,r.a.createElement(_.a.Item,null,this.props.tokenId?r.a.createElement(B.b,{to:"/logout"},"Log Out"):r.a.createElement(B.b,{to:"/authentication"},"Authenticate"))))),e)}}]),n}(r.a.Component),be={retainLoginStatus:function(){return{type:oe}}},ge=Object(P.g)(Object(v.b)((function(e){return{tokenId:null!==e.authenticationReducer.tokenId}}),be)(he));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var fe=n(66),Ee={order:[],orderConfirm:!1},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(d.a)(Object(d.a)({},e),{},{orderConfirm:!1});case w:var n=Object(d.a)(Object(d.a)({},t.orderData),{},{id:t.id.name});return Object(d.a)(Object(d.a)({},e),{},{orderConfirm:!0,order:e.order.concat(n)});default:return e}},ye=n(167),ve={ingredients:null,totalPrice:3,builder:!1},je={salad:.5,bacon:.7,cheese:1,meat:1.8},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(d.a)(Object(d.a)({},e),{},{ingredients:t.ingredients,totalPrice:3,builder:!1});case I:return Object(d.a)(Object(d.a)({},e),{},{ingredients:Object(d.a)(Object(d.a)({},e.ingredients),{},Object(H.a)({},t.ingredientName,e.ingredients[t.ingredientName]+1)),totalPrice:e.totalPrice+je[t.ingredientName],builder:!0});case C:return Object(d.a)(Object(d.a)({},e),{},{ingredients:Object(d.a)(Object(d.a)({},e.ingredients),{},Object(H.a)({},t.ingredientName,e.ingredients[t.ingredientName]-1)),totalPrice:e.totalPrice-je[t.ingredientName],builder:!0});default:return e}},Ie={fetchedOrders:null},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(d.a)(Object(d.a)({},e),{},{fetchedOrders:t.payload});default:return e}},Se={tokenId:null,expiration:""},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return Object(d.a)(Object(d.a)({},e),{},{tokenId:t.tokenId,expiration:t.expiration});case ce:return Object(d.a)(Object(d.a)({},e),{},{tokenId:null});default:return e}},Ne=n(46),xe=n.n(Ne),Te=n(37);function Re(){return fetch("https://react-burgerapp-942a6.firebaseio.com/ingredients.json")}var Ue=xe.a.mark(_e);function _e(){var e,t;return xe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Te.b)(Re);case 2:return e=n.sent,n.next=5,e.json();case 5:return t=n.sent,n.next=8,Object(Te.c)({type:k,ingredients:t});case 8:case"end":return n.stop()}}),Ue)}var Me=[Object(Te.d)(j,_e)],De=function(e,t){return console.log("Api",e),fetch("https://react-burgerapp-942a6.firebaseio.com/orders.json?auth=".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},Pe=xe.a.mark(Be);function Be(e){var t,n,a,r;return xe.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=e.tokenId,c.next=3,Object(Te.b)(De,t,n);case 3:return a=c.sent,c.next=6,a.json();case 6:return r=c.sent,c.next=9,Object(Te.c)((o=r,i=t,console.log(o,i),{type:w,id:o,orderData:i}));case 9:case"end":return c.stop()}var o,i}),Pe)}var Ae=[Object(Te.d)(S,Be)],He=function(e){return fetch("https://react-burgerapp-942a6.firebaseio.com/orders.json?auth=".concat(e),{"Content-Type":"application/json",method:"GET"})},Le=xe.a.mark(Fe);function Fe(e){var t,n,a,r,c;return xe.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.tokenId,console.log(t),o.next=4,Object(Te.b)(He,t);case 4:return n=o.sent,o.next=7,n.json();case 7:for(c in a=o.sent,r=[],a)r.push(Object(d.a)(Object(d.a)({},a[c]),{},{id:c}));return console.log(r),o.next=13,Object(Te.c)({type:V,payload:r});case 13:case"end":return o.stop()}}),Le)}var Ge=[Object(Te.d)(Q,Fe)],We=function(e,t){console.log(t);var n="https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyBQMN48K6wZSXBubeTNR7eT8TH_q_EvdEo";return t||(n="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBQMN48K6wZSXBubeTNR7eT8TH_q_EvdEo"),fetch(n,{method:"POST",headers:{"Content-Type":"application / json"},body:JSON.stringify(e)})},ze=xe.a.mark(Xe),Je=xe.a.mark(Ke);function Xe(e){var t,n,a,r,c;return xe.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=e.isSignUp,o.next=3,Object(Te.b)(We,t,n);case 3:return a=o.sent,o.next=6,a.json();case 6:return r=o.sent,c=new Date((new Date).getTime()+1e3*r.expiresIn),localStorage.setItem("tokenId",r.idToken),localStorage.setItem("expirationTime",c),o.next=12,Object(Te.c)(ie(r.idToken,r.expiresIn));case 12:case"end":return o.stop()}}),ze)}function Ke(){var e,t;return xe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,localStorage.getItem("tokenId");case 2:return e=n.sent,n.next=5,localStorage.getItem("expirationTime");case 5:return t=n.sent,n.next=8,Object(Te.c)(ie(e,t));case 8:case"end":return n.stop()}}),Je)}var $e=[Object(Te.e)(ae,Xe),Object(Te.d)(oe,Ke)],qe=xe.a.mark(Qe);function Qe(){return xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Te.a)([].concat(Object(p.a)(Me),Object(p.a)(Ae),Object(p.a)(Ge),Object(p.a)($e)));case 2:case"end":return e.stop()}}),qe)}var Ve=Qe,Ze=Object(fe.c)({orderIngredientsReducer:Oe,initIngredientsReducer:ke,fetchOrderReducer:Ce,authenticationReducer:we}),Ye=Object(ye.a)(),et=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||fe.d,tt=Object(fe.e)(Ze,et(Object(fe.a)(Ye)));Ye.run(Ve),o.a.render(r.a.createElement(v.a,{store:tt},r.a.createElement(B.a,null,r.a.createElement(ge,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[173,1,2]]]);
//# sourceMappingURL=main.b394eec9.chunk.js.map